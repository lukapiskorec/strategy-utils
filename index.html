<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Strategy Utils</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
</head>

<body>
    <header class="app-header">
        <h1>ðŸ“ˆ Strategy Utils ðŸ¦Ž</h1>
        <p class="sub">On-chain price analysis for NFTStrategyâ„¢ tokens via GeckoTerminal</p>
    </header>

    <main class="container">
        <!-- CONTROLS -->
        <form id="controls" class="controls" autocomplete="off">
            <div class="field">
                <label for="strategy">Strategy</label>
                <select id="strategy" name="strategy">
                    <option value="PunkStrategy">PunkStrategy</option>
                    <option value="BirbStrategy">BirbStrategy</option>
                    <option value="DickStrategy">DickStrategy</option>
                    <option value="ApeStrategy">ApeStrategy</option>
                    <option value="PudgyStrategy">PudgyStrategy</option>
                    <option value="SquiggleStrategy">SquiggleStrategy</option>
                    <option value="ToadzStrategy">ToadzStrategy</option>
                </select>
                <small>Pick a predefined strategy token.</small>
            </div>

            <div class="field">
                <label for="step">Step</label>
                <select id="step" name="step">
                    <option value="1m">1 minute</option>
                    <option value="5m">5 minutes</option>
                    <option value="10m">10 minutes</option>
                    <option value="15m">15 minutes</option>
                    <option value="1h" selected>1 hour</option>
                    <option value="4h">4 hours</option>
                    <option value="12h">12 hours</option>
                    <option value="1d">1 day</option>
                </select>
            </div>

            <div class="field">
                <label for="rows">Rows (N)</label>
                <input id="rows" name="rows" type="number" min="1" max="1000" value="100" />
                <small>Max 1000 rows per request.</small>
            </div>

            <div class="field">
                <label for="start">Start</label>
                <input id="start" name="start" type="datetime-local" />
                <div class="inline-check">
                    <label>
                        <input id="start-at-launch" type="checkbox" />
                        At Launch
                    </label>
                    <small>sets Start to Launch (proxy)</small>
                </div>
            </div>

            <div class="actions">
                <button id="load" class="btn primary" type="submit">Load prices</button>
                <button id="stop" class="btn" type="button" disabled>Stop</button>
            </div>
        </form>

        <!-- META -->
        <section class="meta">
            <div id="status" class="status">Ready.</div>
            <div id="provider" class="provider">Provider: GeckoTerminal Public API</div>
        </section>

        <!-- INFO BAR -->
        <section id="token-info" class="infobar" hidden>
            <div class="info-item">
                <span class="label">Name</span>
                <span id="ti-name" class="value">â€”</span>
            </div>

            <div class="info-item">
                <span class="label">Ticker</span>
                <span id="ti-symbol" class="value">â€”</span>
            </div>

            <div class="info-item">
                <span class="label">Contract (eth)</span>
                <div class="addr-inline">
                    <code id="ti-contract" class="addr">â€”</code>
                    <button id="copy-contract" class="icon-btn" type="button" aria-label="Copy address"
                        title="Copy address">
                        <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path fill="currentColor"
                                d="M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z" />
                        </svg>
                    </button>
                    <a id="scan-link" class="icon-btn" href="#" target="_blank" rel="noopener noreferrer"
                        aria-label="View on Etherscan" title="View on Etherscan">
                        <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path fill="currentColor"
                                d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7z" />
                        </svg>
                    </a>
                </div>
            </div>

            <div class="info-item">
                <span class="label">Launch (proxy)</span>
                <span id="ti-launch" class="value">â€”</span>
            </div>

            <div class="info-item">
                <span class="label">Token age</span>
                <span id="ti-age" class="value">â€”</span>
            </div>

            <div class="info-item">
                <span class="label">Liquidity (USD)</span>
                <span id="ti-liq" class="value">â€”</span>
            </div>

            <div class="info-item">
                <span class="label">24h Volume (USD)</span>
                <span id="ti-vol24" class="value">â€”</span>
            </div>

            <div class="info-item">
                <span class="label">Market Cap (USD)</span>
                <span id="ti-mcap" class="value">â€”</span>
            </div>
        </section>

        <!-- COLUMN PICKER -->
        <section class="columns-picker" aria-label="Column visibility">
            <span>Columns:</span>
            <label><input type="checkbox" data-col="timestamp" checked> Timestamp</label>
            <label><input type="checkbox" data-col="unix"> Unix</label>
            <label><input type="checkbox" data-col="open"> Open</label>
            <label><input type="checkbox" data-col="high"> High</label>
            <label><input type="checkbox" data-col="low"> Low</label>
            <label><input type="checkbox" data-col="close" checked> Close</label>
            <label><input type="checkbox" data-col="volume" checked> Volume</label>
            <label><input type="checkbox" data-col="mcap" checked> Market Cap</label>
            <label><input type="checkbox" data-col="fee" checked> Trading fee</label>
            <label><input type="checkbox" data-col="breakeven" checked> Breakeven mult.</label>
            <label><input type="checkbox" data-col="breakeven_mc" checked> Breakeven MC</label>
        </section>

        <!-- TABLE (fixed-height with scroll) -->
        <section class="table-wrap">
            <div class="table-scroll">
                <table id="prices">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th data-col="timestamp">Timestamp</th>
                            <th data-col="unix">Unix (s)</th>
                            <th data-col="open">Open</th>
                            <th data-col="high">High</th>
                            <th data-col="low">Low</th>
                            <th data-col="close">Close</th>
                            <th data-col="volume">Volume</th>
                            <th data-col="mcap">Market Cap</th>
                            <th data-col="fee">Trading fee</th>
                            <th data-col="breakeven">Breakeven mult.</th>
                            <th data-col="breakeven_mc">Breakeven MC</th>
                        </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                </table>
            </div>
        </section>

        <!-- CHART -->
        <section class="chart-wrap">
            <div class="chart-controls" aria-label="Chart series">
                <span>Chart:</span>
                <!-- defaults: Close + Market Cap -->
                <label><input type="checkbox" data-ser="open"> Open</label>
                <label><input type="checkbox" data-ser="high"> High</label>
                <label><input type="checkbox" data-ser="low"> Low</label>
                <label><input type="checkbox" data-ser="close" checked> Close</label>
                <label><input type="checkbox" data-ser="volume"> Volume</label>
                <label><input type="checkbox" data-ser="mcap" checked> Market Cap</label>
                <label><input type="checkbox" data-ser="fee"> Trading fee</label>
                <label><input type="checkbox" data-ser="breakeven"> Breakeven mult.</label>
                <label><input type="checkbox" data-ser="breakeven_mc"> Breakeven MC</label>
            </div>

            <div class="chart-canvas-wrap">
                <canvas id="chart" width="1000" height="320"></canvas>
                <div id="chart-tooltip" class="chart-tooltip" hidden></div>
            </div>

            <div id="chart-legend" class="chart-legend"></div>
        </section>

    </main>

    <footer class="app-footer">
        <small>Data fetched from GeckoTerminalâ€™s open endpoints.</small><br>
        <small>MIT License, coded by Luka Piskorec with ChatGPT, 2025</small>
    </footer>

    <script src="app.js"></script>
</body>

</html>