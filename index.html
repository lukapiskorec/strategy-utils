<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Strategy Utils</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
</head>

<body>
    <header class="app-header">
        <h1>ü¶éüìà Strategy Utils</h1>
        <p class="sub">On-chain price analysis for NFTStrategy‚Ñ¢ tokens via GeckoTerminal</p>
    </header>

    <main class="container">
        <form id="controls" class="controls" autocomplete="off">
            <div class="field">
                <label for="chain">Network</label>
                <select id="chain" name="chain">
                    <option value="eth">eth</option>
                    <option value="bsc">bsc</option>
                    <option value="polygon_pos">polygon_pos</option>
                    <option value="arbitrum">arbitrum</option>
                    <option value="base">base</option>
                    <option value="avax">avax</option>
                    <option value="optimism">optimism</option>
                    <option value="solana">solana</option>
                </select>
                <small>Use GeckoTerminal slugs (e.g. <code>eth</code>, <code>polygon_pos</code>).</small>
            </div>

            <div class="field">
                <label for="contract">Token contract</label>
                <input id="contract" name="contract" type="text" spellcheck="false"
                    placeholder="0xYourTokenContractAddress" />
                <small>
                    It will pick the most liquid pool automatically.
                    <button type="button" id="use-sample" class="linklike">Use sample</button>
                </small>
            </div>

            <div class="field">
                <label for="step">Step</label>
                <select id="step" name="step">
                    <option value="1m">1 minute</option>
                    <option value="5m">5 minutes</option>
                    <option value="10m">10 minutes</option>
                    <option value="15m">15 minutes</option>
                    <option value="1h" selected>1 hour</option>
                    <option value="4h">4 hours</option>
                    <option value="12h">12 hours</option>
                    <option value="1d">1 day</option>
                </select>
                <small>10m is computed from 1-minute candles.</small>
            </div>

            <div class="field">
                <label for="rows">Rows (N)</label>
                <input id="rows" name="rows" type="number" min="1" max="1000" value="100" />
                <small>Max 1000 rows per request.</small>
            </div>

            <div class="field">
                <label for="start">Start</label>
                <input id="start" name="start" type="datetime-local" />
            </div>

            <div class="field">
                <label for="end">End</label>
                <input id="end" name="end" type="datetime-local" />
                <small>Leave empty for ‚Äúnow‚Äù.</small>
            </div>

            <div class="actions">
                <button id="load" class="btn primary" type="submit">Load prices</button>
                <button id="stop" class="btn" type="button" disabled>Stop</button>
            </div>
        </form>

        <section class="meta">
            <div id="status" class="status">Ready.</div>
            <div id="provider" class="provider">Provider: GeckoTerminal Public API</div>
        </section>

        <!-- INFO BAR -->
        <section id="token-info" class="infobar" hidden>
            <div class="info-item">
                <span class="label">Name</span>
                <span id="ti-name" class="value">‚Äî</span>
            </div>
            <div class="info-item">
                <span class="label">Ticker</span>
                <span id="ti-symbol" class="value">‚Äî</span>
            </div>
            <div class="info-item">
                <span class="label">Launch (proxy)</span>
                <span id="ti-launch" class="value">‚Äî</span>
            </div>
            <div class="info-item">
                <span class="label">Token age</span>
                <span id="ti-age" class="value">‚Äî</span>
            </div>
            <div class="info-item">
                <span class="label">Liquidity (USD)</span>
                <span id="ti-liq" class="value">‚Äî</span>
            </div>
            <div class="info-item">
                <span class="label">24h Volume (USD)</span>
                <span id="ti-vol24" class="value">‚Äî</span>
            </div>
            <div class="info-item">
                <span class="label">Market Cap (USD)</span>
                <span id="ti-mcap" class="value">‚Äî</span>
            </div>
        </section>

        <!-- COLUMN PICKER -->
        <section class="columns-picker">
            <span>Columns:</span>
            <label><input type="checkbox" data-col="timestamp" checked /> Timestamp</label>
            <label><input type="checkbox" data-col="unix" checked /> Unix</label>
            <label><input type="checkbox" data-col="open" checked /> Open</label>
            <label><input type="checkbox" data-col="high" checked /> High</label>
            <label><input type="checkbox" data-col="low" checked /> Low</label>
            <label><input type="checkbox" data-col="close" checked /> Close</label>
            <label><input type="checkbox" data-col="volume" checked /> Volume</label>
            <label><input type="checkbox" data-col="mcap" checked /> Market Cap</label>
        </section>


        <section class="chosen">
            <div id="chosen-pool" class="chip">Pool: ‚Äî</div>
            <div id="chosen-dex" class="chip">DEX: ‚Äî</div>
            <div id="token-side" class="chip">Token side: ‚Äî</div>
        </section>

        <section class="table-wrap">
            <table id="prices">
                <thead>
                    <tr>
                        <th>#</th>
                        <th data-col="timestamp">Timestamp</th>
                        <th data-col="unix">Unix (s)</th>
                        <th data-col="open">Open</th>
                        <th data-col="high">High</th>
                        <th data-col="low">Low</th>
                        <th data-col="close">Close</th>
                        <th data-col="volume">Volume</th>
                        <th data-col="mcap">Market Cap</th>
                    </tr>
                </thead>
                <tbody id="tbody"></tbody>
            </table>

        </section>
    </main>

    <footer class="app-footer">
        <small>Data fetched from GeckoTerminal‚Äôs open endpoints.<br></small>
        <small>MIT License, coded by Luka Piskorec with ChatGPT, 2025</small>
    </footer>

    <script src="app.js"></script>
</body>

</html>